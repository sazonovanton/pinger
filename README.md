# Система мониторинга доступности сервисов 

Pinger - это приложение для мониторинга доступности сервисов по SSH, HTTP/HTTPS и PING с отображением результатов на веб-странице.  

![screenshot](https://i.imgur.com/oK3GE3X.jpeg)

## Возможности

- Мониторинг через SSH, HTTP/HTTPS и PING
- Визуальные индикаторы статуса с подробными всплывающими подсказками
- База данных SQLite для хранения результатов

## Требования

- Python 3.8+
- Docker и Docker Compose (для запуска в контейнере)
- Утилита `ping` для работы с PING (при запуске без Docker; в Docker-контейнере устанавливается автоматически)
- Зависимости, перечисленные в `requirements.txt`

## Установка и запуск

### Запуск с использованием Docker (рекомендуется)

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/yourusername/pinger.git
   cd pinger
   ```

2. Настройте параметры в файле `docker-compose.yml` (при необходимости):
   ```yaml
   environment:
     - HOST=0.0.0.0
     - PORT=31415
     - DELAY=300
     - SSH_TIMEOUT=20
     - HTTP_TIMEOUT=20
     - PING_TIMEOUT=5
     - PING_COUNT=2
   ```

3. Запустите контейнер:
   ```
   docker-compose up -d
   ```

4. Откройте браузер и перейдите по адресу `http://your-host:31415`

### Запуск без Docker

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/yourusername/pinger.git
   cd pinger
   ```

2. Убедитесь, что утилита `ping` установлена в вашей системе:
   - Для Ubuntu/Debian: `sudo apt-get install iputils-ping`
   - Для CentOS/RHEL: `sudo yum install iputils`  

3. Установите необходимые зависимости:
   ```
   pip install -r requirements.txt
   ```

4. Настройте приложение (опционально):
   Создайте файл `.env` в корневой директории со следующими переменными:
   ```
   HOST=0.0.0.0
   PORT=8000
   DELAY=300
   SSH_TIMEOUT=10
   HTTP_TIMEOUT=30
   PING_TIMEOUT=5
   PING_COUNT=2
   ```

   - `HOST`: IP-адрес для веб-сервера
   - `PORT`: Порт для веб-сервера
   - `DELAY`: Интервал мониторинга в секундах (по умолчанию: 300 = 5 минут)
   - `SSH_TIMEOUT`: Таймаут подключения SSH в секундах
   - `HTTP_TIMEOUT`: Таймаут подключения HTTP в секундах
   - `PING_TIMEOUT`: Таймаут ожидания ответа PING в секундах
   - `PING_COUNT`: Количество PING-запросов для каждой проверки

5. Запустите приложение:
   ```
   python app.py
   ```

6. Откройте браузер и перейдите по адресу `http://your-host:8000` (или в соответствии с настройками хоста/порта)

## Использование

1. Добавление сервисов для мониторинга:
   - Выберите протокол (SSH, HTTP или PING)
   - Для SSH и PING: введите хост/IP-адрес
   - Для SSH: укажите порт (по умолчанию 22)
   - Для HTTP: введите полный URL
   - Добавьте псевдоним (отображаемое имя)
   - Для SSH: опционально укажите имя пользователя
   - Для HTTP: опционально отметьте "Игнорировать ошибки HTTP", чтобы считать ответы 300-500 как корректные  

2. Мониторинг сервисов:
   - Зеленые маркеры: Сервис работает
   - Желтые маркеры: HTTP-сервис вернул предупреждающий статус (HTTP300-500)  
   - Красные маркеры: Сервис недоступен  
   - Наведите курсор на маркеры, чтобы увидеть подробности (временная метка, сообщение об ошибке, HTTP-код состояния)

## Хранение данных

Все данные о сервисах и их статусах хранятся в файле SQLite `./data/monitoring.db`, который будет создан при первом запуске приложения. 
